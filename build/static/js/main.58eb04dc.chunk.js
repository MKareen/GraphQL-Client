(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{165:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(70),c=a.n(l),i=(a(87),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function o(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var s=a(6),u=a(171),m=a(173),d=a(78),f=a(172),h=a(21),p=a.n(h),v=a(25),b=a(20),E=a(5),g=a(15),O=a(16),N=a(18),j=a(17),y=a(19),C=a(174),w=a(12),S=a(10),k=function(e){return"".concat(e," is required")},$=function(e){return"".concat(e," is invalid")},A="/contacts",q=function(e){var t=e.error;return t&&t.message?(t=t.message.split(":"),r.a.createElement("p",{className:"error"},t[1])):r.a.createElement("p",{className:"error"},"Server has experienced an error, please try again later.")},U=a(9),D=a(8);function x(){var e=Object(U.a)(["\n    fragment CompleteUser on UserType {\n        id\n        fullName\n        email\n        createdAt\n        favourites {\n            id\n            owner\n            firstName\n            lastName\n            email\n            phone\n            address\n            createdAt\n        }\n    }\n"]);return x=function(){return e},e}var P=Object(D.b)(x());function L(){var e=Object(U.a)(["\n    mutation {\n        logout {\n            id\n        }\n    }\n"]);return L=function(){return e},e}function F(){var e=Object(U.a)(["\n    mutation($email: String!, $password: String!) {\n        login(email: $email, password: $password) {\n            accessToken\n            user {\n                ...CompleteUser\n            }\n        }\n    }\n    ","\n"]);return F=function(){return e},e}function T(){var e=Object(U.a)(["\n    mutation($fullName: String!, $email: String!, $password: String!) {\n        signup(fullName: $fullName, email: $email, password: $password) {\n            accessToken\n            user {\n                ...CompleteUser\n            }\n        }\n    }\n    ","\n"]);return T=function(){return e},e}var R=Object(D.b)(T(),P),I=Object(D.b)(F(),P),Q=Object(D.b)(L()),M={email:"",password:""},_=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={fields:Object(E.a)({},M),errors:Object(E.a)({},M)},a.clearState=function(){a.setState({fields:Object(E.a)({},M),errors:Object(E.a)({},M)})},a.validate=function(e,t){switch(e){case"email":if(Object(S.isEmpty)(t))return k("Email");if(!Object(S.isEmail)(t))return $("Email");break;case"password":if(Object(S.isEmpty)(t))return k("Password");break;default:return""}},a.handleChange=function(e){var t=Object(w.cloneDeep)(a.state),n=e.target,r=n.name,l=n.value;"email"===r||"password"===r?t.fields[r]=l:(t.errors[r]=a.validate(r,l),t.fields[r]=l),Object(w.isEqual)(a.state,t)||a.setState(t),a.setState({fields:Object(E.a)({},a.state.fields,Object(b.a)({},r,l)),errors:Object(E.a)({},M)})},a.handleSubmit=function(e,t){e.preventDefault();var n={},r=a.state.fields;Object.keys(r).forEach(function(e){var t=a.validate(e,r[e]);t&&t.length>0&&(n[e]=t)}),Object.keys(n).length>0?a.setState({errors:n}):t().then(function(){var e=Object(v.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data.login)){e.next=7;break}return localStorage.setItem("accessToken",n.accessToken),e.next=5,a.props.refetch();case 5:a.clearState(),a.props.history.push("/");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},a}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.fields,n=t.errors;return r.a.createElement("div",{className:"App"},r.a.createElement(s.Mutation,{mutation:I,variables:{email:a.email,password:a.password}},function(t,l){var c=l.loading,i=l.error;return r.a.createElement("form",{onSubmit:function(a){return e.handleSubmit(a,t)},className:"form"},r.a.createElement("div",{className:"row header"},r.a.createElement("h2",{className:"felt"},"Login")),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:a.email||"",onChange:e.handleChange}),n.email&&r.a.createElement("div",{className:"invalid"},n.email),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:a.password||"",onChange:e.handleChange}),n.password&&r.a.createElement("div",{className:"invalid"},n.password),r.a.createElement("div",{className:"main-wrapper"},r.a.createElement("i",{className:"icon ion-logo-facebook"}),r.a.createElement("i",{className:"icon ion-logo-instagram"}),r.a.createElement("i",{className:"icon ion-logo-twitter"})),r.a.createElement("button",{type:"submit",className:"button-primary",disabled:c},"Login"),i&&r.a.createElement(q,{error:i}))}))}}]),t}(n.Component),W=Object(C.a)(_),B={fullName:"",email:"",password:""},H=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={fields:Object(E.a)({},B),errors:Object(E.a)({},B)},a.clearState=function(){a.setState({fields:Object(E.a)({},B),errors:Object(E.a)({},B)})},a.validate=function(e,t){switch(e){case"fullName":if(Object(S.isEmpty)(t))return k("Full Name");break;case"email":if(Object(S.isEmpty)(t))return k("Email");if(!Object(S.isEmail)(t))return $("Email");break;case"password":if(Object(S.isEmpty)(t))return k("Password");break;default:return""}},a.handleChange=function(e){var t=Object(w.cloneDeep)(a.state),n=e.target,r=n.name,l=n.value;r?t.fields[r]=l:(t.errors[r]=a.validate(r,l),t.fields[r]=l),Object(w.isEqual)(a.state,t)||a.setState(t),a.setState({fields:Object(E.a)({},a.state.fields,Object(b.a)({},r,l)),errors:Object(E.a)({},B)})},a.handleSubmit=function(e,t){e.preventDefault();var n={},r=a.state.fields;Object.keys(r).forEach(function(e){var t=a.validate(e,r[e]);t&&t.length>0&&(n[e]=t)}),Object.keys(n).length>0?a.setState({errors:n}):t().then(function(){var e=Object(v.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.signup,localStorage.setItem("accessToken",n.accessToken),e.next=4,a.props.refetch();case 4:a.clearState(),a.props.history.push("/");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},a}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.fields,n=t.errors;return r.a.createElement("div",{className:"App"},r.a.createElement(s.Mutation,{mutation:R,variables:{fullName:a.fullName,email:a.email,password:a.password}},function(t,l){var c=l.loading,i=l.error;return r.a.createElement("form",{onSubmit:function(a){return e.handleSubmit(a,t)},className:"form"},r.a.createElement("h2",{className:"felt"},"Sign Up"),r.a.createElement("input",{type:"text",name:"fullName",placeholder:"Full Name",value:a.fullName||"",onChange:e.handleChange}),n.fullName&&r.a.createElement("div",{className:"invalid"},n.fullName),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:a.email||"",onChange:e.handleChange}),n.email&&r.a.createElement("div",{className:"invalid"},n.email),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",value:a.password||"",onChange:e.handleChange}),n.password&&r.a.createElement("div",{className:"invalid"},n.password),r.a.createElement("button",{type:"submit",className:"button-primary",disabled:c},"Submit"),i&&r.a.createElement(q,{error:i}))}))}}]),t}(n.Component),Y=Object(C.a)(H);function J(){var e=Object(U.a)(["\n    query {\n        currentUser {\n            ...CompleteUser\n        }\n    }\n    ","\n"]);return J=function(){return e},e}function z(){var e=Object(U.a)(["\n    query {\n        usersList {\n            ...completeUser\n        }\n    }\n    ","\n"]);return z=function(){return e},e}Object(D.b)(z(),P);var V=Object(D.b)(J(),P),G=function(e){return function(t){return r.a.createElement(s.Query,{query:V},function(a){var n=a.data,l=a.loading,c=a.refetch;return l?null:(console.log(n),r.a.createElement(e,Object.assign({},t,{refetch:c,session:n})))})}},K=a(170),X=function(){var e=Object(v.a)(p.a.mark(function e(t,a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.mutate({mutation:Q});case 2:localStorage.removeItem("accessToken"),t.resetStore(),a.push("/");case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),Z=Object(C.a)(function(e){var t=e.history;return r.a.createElement(s.ApolloConsumer,null,function(e){return r.a.createElement("button",{className:"out",onClick:function(){return X(e,t)}},"Logout")})}),ee=function(e){var t=e.session;return r.a.createElement(n.Fragment,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(K.a,{to:"/",exact:!0},"Home")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/contacts"},"Contacts")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/favourites"},"Favourites")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/contact/add"},"Add New")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/search"},"Search")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(Z,null))),r.a.createElement("h4",null,"Welcome, ",r.a.createElement("strong",null,t.currentUser.fullName)," "))},te=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(K.a,{to:"/",exact:!0},"Home")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(K.a,{to:"/signup"},"Signup")))},ae=function(e){var t=e.session;return r.a.createElement("nav",null,t&&t.currentUser?r.a.createElement(ee,{session:t}):r.a.createElement(te,null))};function ne(){var e=Object(U.a)(["\n    fragment CompleteContact on ContactType {\n        id\n        owner\n        firstName\n        lastName\n        email\n        phone \n        address\n        isFavourite\n        createdAt\n    }\n"]);return ne=function(){return e},e}var re=Object(D.b)(ne());function le(){var e=Object(U.a)(["\n    query {\n        userContacts {\n            ...CompleteContact\n        }\n    }\n    ","\n"]);return le=function(){return e},e}function ce(){var e=Object(U.a)(["\n    query($q: String) {\n        searchContact(q: $q) {\n            ...CompleteContact\n        }\n    }\n    ","\n"]);return ce=function(){return e},e}function ie(){var e=Object(U.a)(["\n    query contact($id: ID!) {\n        contact(id: $id) {\n            ...CompleteContact\n        }\n    }\n    ","\n"]);return ie=function(){return e},e}var oe=Object(D.b)(ie(),re),se=Object(D.b)(ce(),re),ue=Object(D.b)(le(),re),me=a(49),de=function(e){var t=e.id,a=e.firstName,n=e.lastName,l=e.phone;return r.a.createElement("li",null,r.a.createElement(me.a,{className:"contact-link",to:"/contact/".concat(t)},r.a.createElement("h4",null,a," ",n)),r.a.createElement("p",null,r.a.createElement("strong",null,l)))},fe=function(e){return function(t){return function(a){return r.a.createElement(s.Query,{query:V},function(n){var l=n.loading,c=n.data;return l?null:e(c)?r.a.createElement(t,a):r.a.createElement(f.a,{to:"/"})})}}},he=fe(function(e){return e&&e.currentUser})(function(){return r.a.createElement("div",{className:"contact-list"},r.a.createElement(s.Query,{query:ue},function(e){var t=e.data;return e.loading?r.a.createElement("div",null,"Loading..."):(console.log(t),t&&t.userContacts.length?r.a.createElement("ul",null,t.userContacts.map(function(e,t){return r.a.createElement(de,Object.assign({key:t},e))})):r.a.createElement("div",null,"No Contacts Found"))}))});function pe(){var e=Object(U.a)(["\n    mutation($fullName: String!, $email: String!) {\n        editUser(fullName: $fullName, email: $email) {\n            ...CompleteUser\n        }\n    }\n    ","\n"]);return pe=function(){return e},e}var ve=Object(D.b)(pe(),P),be=a(79),Ee=a.n(be),ge={fullName:"",email:""},Oe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={fields:Object(E.a)({},ge),errors:Object(E.a)({},ge)},a.validate=function(e,t){switch(e){case"fullName":if(Object(S.isEmpty)(t))return k("Full Name");break;case"email":if(Object(S.isEmpty)(t))return k("Email");if(!Object(S.isEmail)(t))return $("Email");break;default:return""}},a.handleChange=function(e){var t=Object(w.cloneDeep)(a.state),n=e.target,r=n.name,l=n.value;"fullName"===r||"email"===r?t.fields[r]=l:(t.errors[r]=a.validate(r,l),t.fields[r]=l),Object(w.isEqual)(a.state,t)||a.setState(t),a.setState({fields:Object(E.a)({},a.state.fields,Object(b.a)({},r,l)),errors:Object(E.a)({},ge)})},a.handleSubmit=function(e,t){e.preventDefault();var n={},r=a.state.fields;Object.keys(r).forEach(function(e){var t=a.validate(e,r[e]);t&&t.length>0&&(n[e]=t)}),Object.keys(n).length>0?a.setState({errors:n}):t().then(function(e){var t=e.data;console.log(t)})},a}return Object(y.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data.currentUser;e&&this.setState({fields:{fullName:e.fullName,email:e.email}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.fields,n=t.errors,l=this.props.data.currentUser;return r.a.createElement(s.Mutation,{mutation:ve,variables:{fullName:a.fullName,email:a.email}},function(t,c){var i=c.loading,o=c.error;return r.a.createElement("form",{className:"form",onSubmit:function(a){return e.handleSubmit(a,t)}},r.a.createElement("label",null,"Full Name"),r.a.createElement("input",{type:"text",name:"fullName",placeholder:"Full Name",value:a.fullName||"",onChange:e.handleChange}),n.fullName&&r.a.createElement("div",{className:"invalid"},n.fullName),r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:a.email||"",onChange:e.handleChange}),n.email&&r.a.createElement("div",{className:"invalid"},n.email),r.a.createElement("label",null,"Join Date"),r.a.createElement("input",{type:"text",disabled:!0,value:Ee()(l.createdAt).format("YYYY-MM-DD HH:mm:ss")}),r.a.createElement("button",{disabled:i,type:"submit",className:"button-primary"},"Save"),o&&r.a.createElement(q,{error:o}))})}}]),t}(n.Component),Ne=function(e){var t=e.session;return r.a.createElement("div",{className:"App"},r.a.createElement("h3",null,"User info"),r.a.createElement(Oe,{data:t}))},je=fe(function(e){return e&&e.currentUser})(function(e){var t=e.session;return console.log(t),r.a.createElement("div",{className:"contact-list"},r.a.createElement(Ne,{session:t}))}),ye=a(80);function Ce(){var e=Object(U.a)(["\n    mutation($id: ID!) {\n        deleteContact(id: $id) {\n            id\n        }\n    }\n"]);return Ce=function(){return e},e}function we(){var e=Object(U.a)(["\n    mutation($id: ID!) {\n        addToFavourites(id: $id) {\n            id\n            isFavourite\n        }\n    }\n"]);return we=function(){return e},e}function Se(){var e=Object(U.a)(["\n    mutation($id: ID!, $firstName: String!, $lastName: String, $phone: String!, $email: String, $address: String) {\n        editContact (id: $id, firstName: $firstName, lastName: $lastName, phone: $phone, email: $email, address: $address) {\n            ...CompleteContact\n        } \n    }\n    ","\n"]);return Se=function(){return e},e}function ke(){var e=Object(U.a)(["\n    mutation($firstName: String!, $lastName: String, $phone: String!, $email: String, $address: String) {\n        addContact (firstName: $firstName, lastName: $lastName, phone: $phone, email: $email, address: $address) {\n            ...CompleteContact\n        } \n    }\n    ","\n"]);return ke=function(){return e},e}var $e=Object(D.b)(ke(),re),Ae=Object(D.b)(Se(),re),qe=Object(D.b)(we()),Ue=Object(D.b)(Ce()),De={firstName:"",lastName:"",phone:"",email:"",address:""},xe={firstName:"",phone:""},Pe=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={fields:Object(E.a)({},De),errors:Object(E.a)({},xe)},a.clearState=function(){a.setState({fields:Object(E.a)({},De),errors:Object(E.a)({},xe)})},a.validate=function(e,t){switch(e){case"firstName":if(Object(S.isEmpty)(t))return k("First Name");break;case"phone":if(Object(S.isEmpty)(t))return k("Phone Number");break;default:return""}},a.handleChange=function(e){var t=Object(w.cloneDeep)(a.state),n=e.target,r=n.name,l=n.value;"firstName"===r||"phone"===r?t.fields[r]=l:(t.errors[r]=a.validate(r,l),t.fields[r]=l),Object(w.isEqual)(a.state,t)||a.setState(t),a.setState({fields:Object(E.a)({},a.state.fields,Object(b.a)({},r,l)),errors:Object(E.a)({},xe)})},a.handleSubmit=function(e,t){e.preventDefault();var n={},r=a.state.fields;Object.keys(r).forEach(function(e){var t=a.validate(e,r[e]);t&&t.length>0&&(n[e]=t)}),Object.keys(n).length>0?a.setState({errors:n}):t().then(function(e){var t=e.data;console.log(t),a.clearState(),a.props.history.push("/contacts")})},a.updateCache=function(e,t){var a=t.data.addContact,n=e.readQuery({query:ue}).userContacts;e.writeQuery({query:ue,data:{userContacts:[a].concat(Object(ye.a)(n))}})},a}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.fields,n=t.errors;return r.a.createElement(s.Mutation,{mutation:$e,variables:{firstName:a.firstName,lastName:a.lastName,phone:a.phone,email:a.email,address:a.address},refetchQueries:function(){return[{query:ue}]},update:this.updateCache},function(t,l){var c=l.loading,i=l.error;return r.a.createElement("div",{className:"App"},r.a.createElement("h2",{className:"App"},"Add Contact"),r.a.createElement("form",{className:"form",onSubmit:function(a){return e.handleSubmit(a,t)}},r.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:a.firstName,onChange:e.handleChange}),n.firstName&&r.a.createElement("div",{className:"invalid"},n.firstName),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:a.lastName||"",onChange:e.handleChange}),r.a.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:a.phone,onChange:e.handleChange}),n.phone&&r.a.createElement("div",{className:"invalid"},n.phone),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:a.email||"",onChange:e.handleChange}),r.a.createElement("input",{type:"text",name:"address",placeholder:"Address",value:a.address||"",onChange:e.handleChange}),r.a.createElement("button",{disabled:c,type:"submit",className:"button-primary"},"Add"),i&&r.a.createElement(q,{error:i})))})}}]),t}(n.Component),Le=fe(function(e){return e&&e.currentUser})(Object(C.a)(Pe)),Fe={firstName:"",lastName:"",phone:"",email:"",address:""},Te={firstName:"",phone:""},Re=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={fields:Object(E.a)({},Fe),errors:Object(E.a)({},Te)},a.validate=function(e,t){switch(e){case"firstName":if(Object(S.isEmpty)(t))return k("First Name");break;case"phone":if(Object(S.isEmpty)(t))return k("Phone Number");break;default:return""}},a.handleChange=function(e){var t=Object(w.cloneDeep)(a.state),n=e.target,r=n.name,l=n.value;"firstName"===r||"phone"===r?t.fields[r]=l:(t.errors[r]=a.validate(r,l),t.fields[r]=l),Object(w.isEqual)(a.state,t)||a.setState(t),a.setState({fields:Object(E.a)({},a.state.fields,Object(b.a)({},r,l)),errors:Object(E.a)({},Te)})},a.handleSubmit=function(e,t){e.preventDefault();var n={},r=a.state.fields;Object.keys(r).forEach(function(e){var t=a.validate(e,r[e]);t&&t.length>0&&(n[e]=t)}),Object.keys(n).length>0?a.setState({errors:n}):t().then(function(e){var t=e.data;console.log(t)})},a}return Object(y.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data.contact;this.setState({fields:{firstName:e.firstName,lastName:e.lastName,phone:e.phone,email:e.email,address:e.address}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.fields,n=t.errors,l=this.props.data.contact;return r.a.createElement(s.Mutation,{mutation:Ae,variables:{id:l.id,firstName:a.firstName,lastName:a.lastName,phone:a.phone,email:a.email,address:a.address},refetchQueries:function(){return[{query:ue}]}},function(t,l){var c=l.loading,i=l.error;return r.a.createElement("form",{className:"form",onSubmit:function(a){return e.handleSubmit(a,t)}},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name",value:a.firstName,onChange:e.handleChange}),n.firstName&&r.a.createElement("div",{className:"invalid"},n.firstName),r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name",value:a.lastName||"",onChange:e.handleChange}),r.a.createElement("label",null,"Phone"),r.a.createElement("input",{type:"text",name:"phone",placeholder:"Phone",value:a.phone,onChange:e.handleChange}),n.phone&&r.a.createElement("div",{className:"invalid"},n.phone),r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email",value:a.email||"",onChange:e.handleChange}),r.a.createElement("label",null,"Address"),r.a.createElement("input",{type:"text",name:"address",placeholder:"address",value:a.address||"",onChange:e.handleChange}),r.a.createElement("button",{disabled:c,type:"submit",className:"button-primary"},"Save"),i&&r.a.createElement(q,{error:i}))})}}]),t}(n.Component),Ie=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(e){window.confirm("Do you really want to delete?")&&e().then(function(){a.props.history.push(A)})},a.handleAddOrRemove=function(e){e().then(function(e){var t=e.data;console.log(t)})},a.updateDeleteCache=function(e,t){var a=t.data.deleteContact,n=e.readQuery({query:ue}).userContacts;e.writeQuery({query:ue,data:{userContacts:n.filter(function(e){return e.id!==a.id})}})},a}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props.match.params.id;return r.a.createElement(s.Query,{query:oe,variables:{id:t}},function(a){var n=a.data,l=a.loading,c=a.error;return l?r.a.createElement("div",null,"Loading..."):c?r.a.createElement("div",null,c.message):r.a.createElement("div",{className:"contact-list"},r.a.createElement("h2",null,n.contact.firstName," ",n.contact.lastName),r.a.createElement(Re,{data:n}),r.a.createElement(s.Mutation,{mutation:qe,variables:{id:t},refetchQueries:function(){return[{query:oe,variables:{id:t}},{query:ue},{query:V}]}},function(t){return r.a.createElement("button",{onClick:function(){return e.handleAddOrRemove(t)}},n&&n.contact.isFavourite?"Remove from favourites":"Add to favourites")}),r.a.createElement("br",null),r.a.createElement(s.Mutation,{mutation:Ue,variables:{id:t},refetchQueries:function(){return[{query:ue}]},update:e.updateDeleteCache},function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.a.createElement("button",{className:"delete-button",onClick:function(){return e.handleDelete(t)}},a.loading?"Deleting...":"Delete")}))})}}]),t}(n.Component),Qe=fe(function(e){return e&&e.currentUser})(Object(C.a)(Ie)),Me=function(e){var t=e.id,a=e.firstName,n=e.lastName,l=e.phone;return r.a.createElement("li",null,r.a.createElement(me.a,{to:"/contact/".concat(t)},r.a.createElement("h4",null,"".concat(a," ").concat(n))),r.a.createElement("p",null,r.a.createElement("strong",null,l)))},_e=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(N.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={searchResults:[]},a.handleChange=function(e){var t=e.searchContact;a.setState({searchResults:t})},a}return Object(y.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.state.searchResults;return r.a.createElement(s.ApolloConsumer,null,function(a){return r.a.createElement("div",{className:"contact-list"},r.a.createElement("input",{type:"search",placeholder:"Search for Contacts",onChange:function(){var t=Object(v.a)(p.a.mark(function t(n){var r,l;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.persist(),t.next=3,a.query({query:se,variables:{q:n.target.value}});case 3:r=t.sent,l=r.data,e.handleChange(l);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}),r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement(Me,Object.assign({key:t},e))})))})}}]),t}(n.Component),We=fe(function(e){return e&&e.currentUser})(_e),Be=fe(function(e){return e&&e.currentUser})(function(e){var t=e.session;console.log(t);var a=t.currentUser;return r.a.createElement("div",{className:"contact-list"},r.a.createElement("ul",null,a&&a.favourites.length?a.favourites.map(function(e,t){return r.a.createElement(de,Object.assign({key:t},e))}):r.a.createElement("div",null,"No Favourites")))}),He=(a(165),function(){return r.a.createElement("div",{className:"contact-list"},r.a.createElement("h1",null,"Home"),"Our Site for",r.a.createElement("div",{className:"dropping-texts"},r.a.createElement("div",null,r.a.createElement("b",null,"Designers")),r.a.createElement("div",null,r.a.createElement("b",null,"Developers")),r.a.createElement("div",null,r.a.createElement("b",null,"Everyone!"))),r.a.createElement("p",null,"Two of the most important days of your life: the day you were born, and the day you realized why!"))}),Ye=G(function(e){var t=e.refetch,a=e.session;return r.a.createElement(u.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(ae,{session:a}),r.a.createElement(m.a,null,r.a.createElement(d.a,{path:"/",exact:!0,component:He}),r.a.createElement(d.a,{path:"/contacts",render:function(){return r.a.createElement(he,{session:a})}}),r.a.createElement(d.a,{path:"/login",render:function(){return r.a.createElement(W,{refetch:t})}}),r.a.createElement(d.a,{path:"/signup",render:function(){return r.a.createElement(Y,{refetch:t})}}),r.a.createElement(d.a,{path:"/profile",render:function(){return r.a.createElement(je,{session:a})}}),r.a.createElement(d.a,{path:"/contact/add",render:function(){return r.a.createElement(Le,{session:a})}}),r.a.createElement(d.a,{path:"/contact/:id",render:function(){return r.a.createElement(Qe,{session:a})}}),r.a.createElement(d.a,{path:"/search",render:function(){return r.a.createElement(We,{session:a})}}),r.a.createElement(d.a,{path:"/favourites",render:function(){return r.a.createElement(Be,{session:a})}}),r.a.createElement(f.a,{to:"/"}))))}),Je={development:{apiUrl:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL},production:{apiUrl:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL}}.production,ze=new D.a({uri:"https://gqlapi-contacts.herokuapp.com/graphql",fetchOptions:{credentials:"include"},request:function(e){var t=localStorage.getItem("accessToken");console.log(Je.apiUrl,"***********"),e.setContext({headers:{authorization:"Bearer ".concat(t)}})},onError:function(e){var t=e.graphQLErrors;e.networkError&&localStorage.removeItem("accessToken"),t&&t.map(function(e){var t=e.message,a=e.state,n=e.locations,r=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(r,", State: ").concat(a))})}});c.a.render(r.a.createElement(s.ApolloProvider,{client:ze},r.a.createElement(Ye,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");i?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):o(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):o(t,e)})}}()},82:function(e,t,a){e.exports=a(166)},87:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.58eb04dc.chunk.js.map